############################################################
# Koban Free API – Internal Environment Template (.env.example)
# For team use only. Copy to .env and adjust for your machine/env.
# Note: The server automatically loads .env via dotenv.
#
# Sugestão de fluxo:
# - Mantenha este arquivo com defaults neutros.
# - Para desenvolvimento local, crie um `.env.development` (ignorado no git)
#   copiando as chaves relevantes e aponte `DATABASE_URL` para seu banco local.
# - `.env.local` e `.env.development.local` também são aceitos como overrides.
############################################################

# Server
# Port where the HTTP server will listen. Some PaaS (e.g., Railway) inject this.
PORT=3000
# Runtime environment (development|production|test)
NODE_ENV=development

# Database (PostgreSQL + Prisma)
# Prisma uses DATABASE_URL to connect.
# Ambiente local? copie esta linha para `.env.development` e aponte para um banco isolado.
# Formato Neon: postgresql://USER:PASSWORD@HOST:PORT/DBNAME?sslmode=require
DATABASE_URL=

# CORS
# Allowed origin for cross-site requests. Use a specific origin when sending credentials.
# Examples:
# CORS_ORIGIN=http://localhost:5173
# CORS_ORIGIN=https://internal-team-domain.example
CORS_ORIGIN=*
# Whether to send cookies/authorization headers in CORS responses (true|false).
# IMPORTANT (internal): do not use credentials=true with CORS_ORIGIN='*'. Always set a concrete origin for team apps.
CORS_CREDENTIALS=false

# Rate limiting
# Window size in minutes and maximum number of requests per IP per window.
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=100

# Key defaults
# Default validity for a new key (in hours) and maximum allowed value.
DEFAULT_KEY_HOURS=24
MAX_KEY_HOURS=168

# Logging
# Log level: error|warn|info|debug
LOG_LEVEL=info

# Admin (development defaults – rotate em produção)
# Credenciais para o painel admin (in-memory auth).
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123

# Proteção contra brute force no login admin.
# Máximo de tentativas falhas por IP antes de bloquear.
ADMIN_LOGIN_MAX_ATTEMPTS=10
# Janela de tempo (ms) para contar tentativas. 900000 = 15 min.
ADMIN_LOGIN_WINDOW_MS=900000

# Networking / IP detection preference for logs/UI: public|private
# Defaults to 'private' in development, 'public' otherwise if unset.
IP_PREFERENCE=private
