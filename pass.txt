Passo a passo sugerido üõ†Ô∏è
Modelagem:
Defina schema SQL para access_keys (j√° existe), admin_users, admin_sessions.
Ajuste keys para ter FK para admin_users.created_by.
Ferramentas:
Adote Prisma (ou Knex) e remova sqlite3.
Criar migra√ß√µes iniciais.
Sess√µes:
Troque Map por Redis/Upstash ou tabela admin_sessions.
Cookies HttpOnly, Secure, SameSite=strict. Considere JWT curto + refresh.
Endpoints:
Implementar /admin/api/users (GET, POST, PATCH status, DELETE) com valida√ß√µes.
Proteger endpoints com RBAC b√°sico (usu√°rio master vs comum se necess√°rio).
Dashboard:
Depois de backend operacional, o front j√° funciona. Remova depend√™ncias in√∫teis ("koban": "file:..", "konan-free-api": "file:..").
Infra:
Substitua keys.db por .gitignore.
Configure vari√°veis no Vercel (DATABASE_URL, REDIS_URL, ADMIN_JWT_SECRET, etc.).
Ajuste vercel.json se precisar rodar prisma generate no build (coloque script postinstall ou prisma generate antes do deploy).
Seguran√ßa extra:
Habilite CSRF se usar pain√©is stateful (ou use somente fetch com tokens).
Rate-limit refor√ßado nos endpoints /admin/auth/login.
Escolha um provider de e-mail/OTP se quiser recupera√ß√£o.
